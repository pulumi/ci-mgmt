# WARNING: This file is autogenerated - changes will be overwritten if not made via https://github.com/pulumi/ci-mgmt

env:
  GH_TOKEN: ${{ secrets.PULUMI_BOT_TOKEN }}
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  upgrade_provider:
    if: ${{ (github.event.issue.user.login == 'pulumi-bot' && contains(github.event.issue.title, 'Upgrade terraform-provider-')) || github.event_name == 'workflow_dispatch' }}
    name: upgrade-provider
    runs-on: #{{ .Config.runner.default }}#
    steps:
    #{{- if .Config.freeDiskSpaceBeforeBuild }}#
    # Run as first step so we don't delete things that have just been installed
    - name: Free Disk Space (Ubuntu)
      uses: #{{ .Config.actionVersions.freeDiskSpace }}#
      with:
        tool-cache: false
        swap-storage: false
    #{{- end }}#
    - name: Call upgrade provider action
      uses: #{{ .Config.actionVersions.upgradeProviderAction }}#
      with:
        kind: all
        #{{- if .Config.javaGenVersion }}#
        target-java-version: #{{ .Config.javaGenVersion }}#
        #{{- end }}#
        email: bot@pulumi.com
        username: pulumi-bot
name: Upgrade provider
on:
  issues:
    types:
    - opened
  workflow_dispatch: {}
